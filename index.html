<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDI - Plano de Desenvolvimento Individual</title>
    
    <!-- Tailwind CSS (Estilização) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Transições Suaves */
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Esconder scrollbar padrão mas permitir scroll */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Estilo dos Inputs Focados */
        .input-focus:focus { 
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2); 
            border-color: #4f46e5;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-white/90 backdrop-blur-md border-b border-indigo-100 sticky top-0 z-40">
        <div class="max-w-5xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="bg-indigo-600 w-10 h-10 rounded-lg flex items-center justify-center shadow-md shadow-indigo-200">
                    <!-- Icon TrendingUp -->
                    <svg class="text-white w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                </div>
                <div>
                    <h1 class="font-bold text-xl md:text-2xl text-blue-900 tracking-tight leading-none" id="app-title">Plano de Desenvolvimento Individual</h1>
                </div>
            </div>
            <button onclick="toggleLanguage()" class="text-xs font-bold text-slate-500 hover:text-indigo-600 bg-slate-100 px-4 py-2 rounded-full transition-colors flex items-center gap-2 border border-slate-200">
                <!-- Icon Globe -->
                <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>
                <span id="lang-label">PT</span>
            </button>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-5xl mx-auto w-full px-6 py-10 pb-32">
        
        <!-- STEP 0: WELCOME -->
        <div id="step-0" class="step-content fade-in max-w-2xl mx-auto text-center py-8">
            <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border bg-indigo-50 text-indigo-700 border-indigo-100 mb-6 inline-block" data-key="welcome_badge">Sua Carreira</span>
            <h2 class="text-4xl md:text-5xl font-bold text-slate-800 mb-6 tracking-tight" data-key="welcome_title">Vamos desenhar seu futuro?</h2>
            <p class="text-xl text-slate-500 leading-relaxed mb-10" data-key="welcome_desc">Este é um espaço seguro para você refletir sobre onde está e onde quer chegar. O PDI não é uma formalidade, é a estratégia da sua evolução.</p>
            
            <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-100 flex gap-4 text-left mb-10 items-start">
                <div class="bg-white p-2 rounded-lg h-fit shadow-sm text-indigo-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                </div>
                <p class="text-indigo-900 font-medium text-sm leading-relaxed" data-key="welcome_note">Lembre-se: Você é o protagonista. Use este rascunho para estruturar suas ideias antes de conversar com sua liderança.</p>
            </div>
            
            <button onclick="nextStep()" class="bg-slate-900 text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-slate-800 hover:scale-105 transition-all shadow-xl flex items-center gap-2 mx-auto">
                <span data-key="btn_start">Iniciar Jornada</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
            </button>
        </div>

        <!-- STEP 1: DIRECTION -->
        <div id="step-1" class="step-content hidden fade-in max-w-3xl mx-auto">
            <div class="text-center mb-10">
                <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border bg-indigo-50 text-indigo-700 border-indigo-100" data-key="step1_badge">Direção</span>
                <h2 class="text-3xl font-bold text-slate-800 mt-4 mb-2" data-key="step1_title">Qual é o seu foco?</h2>
                <p class="text-slate-500" data-key="step1_sub">Definir o destino é o primeiro passo para uma jornada de sucesso.</p>
            </div>

            <!-- Meta Card -->
            <div class="bg-white rounded-3xl shadow-sm border border-slate-100 p-8 mb-6">
                <label class="block text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide" data-key="label_goal">Meta de Desenvolvimento</label>
                <div class="text-sm text-slate-500 mb-4 leading-relaxed border-l-4 border-indigo-200 pl-3 bg-slate-50 p-2 rounded-r-lg" data-key="helper_goal">
                    O que você quer conquistar? Pode ser melhorar sua performance atual, preparar-se para um futuro cargo ou potencializar um talento natural que você já tem.
                </div>
                <textarea id="input-goal" class="input-focus w-full p-4 text-lg bg-slate-50 border border-slate-200 rounded-xl outline-none text-slate-700 min-h-[120px] resize-none transition-all placeholder:text-slate-400" placeholder="Ex: Quero assumir uma posição de coordenação em 1 ano..."></textarea>
            </div>

            <!-- Competencia Card -->
            <div class="bg-white rounded-3xl shadow-sm border border-slate-100 p-8">
                <div class="flex justify-between items-center mb-3">
                    <label class="block text-sm font-bold text-slate-700 uppercase tracking-wide" data-key="label_comp">Competência Principal</label>
                    <button onclick="openModal('competencies')" class="text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full hover:bg-indigo-100 transition-colors flex items-center gap-1">
                        <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                        <span data-key="btn_comp_ideas">Ver sugestões</span>
                    </button>
                </div>
                <p class="text-sm text-slate-500 mb-4" data-key="helper_comp">Qual habilidade será a chave para atingir essa meta? Se tiver dúvida, consulte nossa lista de referência.</p>
                <input id="input-comp" type="text" class="input-focus w-full p-4 text-lg bg-slate-50 border border-slate-200 rounded-xl outline-none text-slate-700 transition-all placeholder:text-slate-400" placeholder="Ex: Liderança Situacional...">
            </div>
        </div>

        <!-- STEP 2: METHODOLOGY (70/20/10) -->
        <div id="step-2" class="step-content hidden fade-in max-w-5xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                <div>
                    <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border bg-indigo-50 text-indigo-700 border-indigo-100" data-key="step2_badge">Metodologia</span>
                    <h2 class="text-3xl font-bold text-slate-800 mt-4 mb-2" data-key="step2_title">Como vamos chegar lá?</h2>
                    
                    <div class="flex gap-3 mt-4 text-slate-500 max-w-2xl bg-white p-4 rounded-2xl border border-slate-100 shadow-sm">
                        <!-- Icon Info -->
                        <svg class="w-5 h-5 flex-shrink-0 mt-1 text-indigo-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
                        <div>
                            <strong class="block text-slate-700 text-sm mb-1" data-key="step2_intro_title">A Regra 70/20/10</strong>
                            <p class="text-sm leading-relaxed" data-key="step2_intro_desc">A ciência mostra que aprendemos mais praticando do que estudando. Para seu plano ser robusto, ele precisa cobrir três frentes:</p>
                        </div>
                    </div>
                </div>
                <button onclick="openModal('ideas')" class="bg-white border border-slate-200 text-slate-700 px-5 py-3 rounded-xl font-bold hover:border-indigo-300 hover:text-indigo-600 transition-all shadow-sm flex items-center gap-2 whitespace-nowrap">
                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2.4 1.5-3.8 0-3.2-2.7-5.5-6-5.5S6 4.5 6 7.7c0 1.4.5 2.8 1.5 3.8.8.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>
                    <span data-key="btn_ideas">Banco de Ideias Completo</span>
                </button>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- 70% -->
                <div class="bg-white rounded-3xl p-1 border-t-4 border-emerald-500 shadow-sm hover:shadow-lg transition-all">
                    <div class="p-6">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl font-bold text-emerald-600">70%</span>
                            <span class="text-xs font-bold uppercase text-emerald-800 bg-emerald-100 px-2 py-1 rounded" data-key="label_70">Experiência</span>
                        </div>
                        <p class="text-sm text-slate-500 mb-6 min-h-[40px]" data-key="expl_70">Aprender fazendo, resolvendo problemas reais.</p>
                        <div class="bg-slate-50 rounded-2xl p-2 border border-slate-100">
                            <textarea id="input-70" class="input-focus w-full bg-transparent border-0 p-3 text-slate-700 outline-none resize-none h-48 text-sm placeholder:text-slate-400" placeholder="Qual desafio prático você vai assumir?"></textarea>
                        </div>
                    </div>
                </div>
                <!-- 20% -->
                <div class="bg-white rounded-3xl p-1 border-t-4 border-amber-500 shadow-sm hover:shadow-lg transition-all">
                    <div class="p-6">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl font-bold text-amber-500">20%</span>
                            <span class="text-xs font-bold uppercase text-amber-800 bg-amber-100 px-2 py-1 rounded" data-key="label_20">Relacionamentos</span>
                        </div>
                        <p class="text-sm text-slate-500 mb-6 min-h-[40px]" data-key="expl_20">Aprender com os outros, trocando experiências.</p>
                        <div class="bg-slate-50 rounded-2xl p-2 border border-slate-100">
                            <textarea id="input-20" class="input-focus w-full bg-transparent border-0 p-3 text-slate-700 outline-none resize-none h-48 text-sm placeholder:text-slate-400" placeholder="Quem será seu mentor ou fonte de feedback?"></textarea>
                        </div>
                    </div>
                </div>
                <!-- 10% -->
                <div class="bg-white rounded-3xl p-1 border-t-4 border-blue-500 shadow-sm hover:shadow-lg transition-all">
                    <div class="p-6">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl font-bold text-blue-500">10%</span>
                            <span class="text-xs font-bold uppercase text-blue-800 bg-blue-100 px-2 py-1 rounded" data-key="label_10">Educação</span>
                        </div>
                        <p class="text-sm text-slate-500 mb-6 min-h-[40px]" data-key="expl_10">Cursos, livros e teoria.</p>
                        <div class="bg-slate-50 rounded-2xl p-2 border border-slate-100">
                            <textarea id="input-10" class="input-focus w-full bg-transparent border-0 p-3 text-slate-700 outline-none resize-none h-48 text-sm placeholder:text-slate-400" placeholder="O que você precisa estudar?"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 3: METRICS -->
        <div id="step-3" class="step-content hidden fade-in max-w-4xl mx-auto">
            <div class="text-center mb-10">
                <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border bg-indigo-50 text-indigo-700 border-indigo-100" data-key="step3_badge">Compromisso</span>
                <h2 class="text-3xl font-bold text-slate-800 mt-4 mb-2" data-key="step3_title">Indicadores e Prazos</h2>
                <p class="text-slate-500" data-key="step3_desc">Um objetivo sem prazo é apenas um sonho. Como vamos medir o sucesso de cada ação?</p>
            </div>

            <div id="metrics-container" class="space-y-6">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- STEP 4: REVIEW -->
        <div id="step-4" class="step-content hidden fade-in max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border bg-indigo-50 text-indigo-700 border-indigo-100" data-key="step4_badge">Revisão</span>
                    <h2 class="text-3xl font-bold text-slate-800 mt-2" data-key="step4_title">Seu Plano Consolidado</h2>
                </div>
                <button onclick="exportToWord()" class="bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                    <span data-key="btn_export">Baixar Documento (.doc)</span>
                </button>
            </div>

            <div class="bg-white border border-slate-200 rounded-[2rem] p-10 shadow-xl space-y-10 relative overflow-hidden">
                <div class="relative z-10" id="review-content">
                    <!-- Dynamic Content -->
                </div>
                
                <!-- Dica de Ouro -->
                <div class="mt-8 pt-6 border-t border-slate-100 flex items-start gap-3 bg-indigo-50/50 p-4 rounded-xl relative z-10">
                    <svg class="w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H3"/></svg>
                    <div>
                        <h4 class="font-bold text-indigo-900 text-sm mb-1" data-key="tip_title">Insight de Carreira</h4>
                        <p class="text-sm text-indigo-800 leading-relaxed" id="tip-text">...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 5: FINAL -->
        <div id="step-5" class="step-content hidden fade-in flex flex-col items-center justify-center min-h-[50vh] max-w-xl mx-auto text-center">
            <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-8 shadow-sm">
                <svg class="w-10 h-10 text-green-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>
            </div>
            
            <h2 class="text-4xl font-bold text-slate-800 mb-4" data-key="final_title">Parabéns pela iniciativa!</h2>
            <p class="text-xl text-slate-500 mb-10" data-key="final_desc">Você deu o primeiro passo. Agora é hora de tirar do papel.</p>
            
            <div class="w-full bg-white border border-slate-200 rounded-2xl p-6 shadow-sm mb-8 text-left relative overflow-hidden group hover:border-indigo-200 transition-colors">
                <div class="absolute left-0 top-0 w-1 h-full bg-indigo-500"></div>
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2" data-key="final_path_label">Próximo passo: Registre no</p>
                <div class="flex flex-col gap-1">
                    <div class="flex items-center gap-2 font-bold text-indigo-900 text-xl">
                        <svg class="w-6 h-6 text-indigo-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                        <span data-key="final_path">Success Factors</span>
                    </div>
                    <div class="flex items-center gap-2 text-slate-500 text-sm ml-8">
                        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 10 20 15 15 20"/><path d="M4 4v7a4 4 0 0 0 4 4h12"/></svg>
                        <span data-key="final_subpath">Home > Objetivos > Metas</span>
                    </div>
                </div>
            </div>

            <div class="bg-amber-50 border border-amber-100 rounded-xl p-5 text-amber-800 text-sm mb-10 flex gap-3 items-start text-left w-full">
                <svg class="w-5 h-5 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
                <span data-key="final_alert">Agende o alinhamento com seu líder para validar este plano. Se precisar de apoio, seu HRBP está à disposição.</span>
            </div>

            <button onclick="resetApp()" class="text-slate-500 hover:text-indigo-600 font-bold px-6 py-3 transition-colors flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
                <span data-key="btn_restart">Criar Novo Plano</span>
            </button>
        </div>

    </main>

    <!-- FOOTER NAV -->
    <div id="footer-nav" class="hidden sticky bottom-0 left-0 w-full bg-white/95 backdrop-blur-sm border-t border-slate-200 p-4 z-40">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <button onclick="prevStep()" class="text-slate-500 font-bold px-4 py-2 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
                <span data-key="nav_prev">Voltar</span>
            </button>
            
            <button id="btn-next" onclick="nextStep()" class="bg-indigo-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-md shadow-indigo-200 flex items-center gap-2">
                <span data-key="nav_next">Continuar</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </button>
        </div>
    </div>

    <!-- MODAL -->
    <div id="modal" class="hidden fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white w-full max-w-4xl max-h-[85vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden animate-fade-in">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <h3 id="modal-title" class="font-bold text-xl text-slate-800"></h3>
                <button onclick="closeModal()" class="w-10 h-10 rounded-full bg-white border border-slate-200 hover:bg-slate-100 flex items-center justify-center text-slate-500 transition-colors">✕</button>
            </div>
            <div id="modal-content" class="p-8 overflow-y-auto"></div>
        </div>
    </div>

    <!-- SCRIPT LOGIC -->
    <script>
        // --- DADOS ---
        const DATA = {
            competencies: [
                "Liderança Ágil", "Inteligência Emocional", "Comunicação Assertiva", 
                "Pensamento Estratégico", "Gestão de Conflitos", "Análise de Dados",
                "Gestão de Projetos", "Inovação e Criatividade", "Visão de Negócio",
                "Trabalho em Equipe", "Resiliência / Adaptabilidade", "Gestão do Tempo",
                "Negociação", "Orientação para Resultados", "Autogestão"
            ],
            ideas: {
                // Conteúdo completo do PDF
                pt: {
                    s70: ["Realizar Shadowing", "Job Rotation", "Projetos transversais", "Atuar em crises", "Lançar novo programa", "Resolver problema crônico", "Melhoria de processos", "Ministrar treinamento", "Facilitar reuniões", "Liderar grupo de projeto", "Visitas a clientes", "Processos orçamentários"],
                    s20: ["Feedbacks (Gestor/Pares)", "Mentoria (Mentor/Mentorado)", "Role Model", "Benchmarking", "Grupos de discussão", "Fóruns técnicos", "Feedback pós-projeto"],
                    s10: ["Treinamentos Formais", "Vídeos/Webinars", "Leitura técnica", "Certificações", "Congressos", "Treinamentos comportamentais"]
                }
            },
            tips: [
                "Conecte sua meta ao negócio: Pergunte-se 'Como desenvolver essa competência ajuda minha área a bater as metas do ano?'. Isso aumenta o apoio da liderança.",
                "Feedback não é apenas sobre o passado. Peça 'Feedforward': pergunte 'O que posso fazer diferente no próximo projeto para ter mais impacto?'.",
                "Não subestime o 20% (Relacionamentos). Mapeie quem são os tomadores de decisão que precisam conhecer seu trabalho e crie uma rotina de troca com eles.",
                "Transforme teoria em processo. Ao terminar um curso (10%), crie um checklist ou ferramenta prática para o time. Isso consolida seu aprendizado e gera legado.",
                "Evidência de sucesso deve ser observável. Em vez de 'melhorar comunicação', prefira 'apresentar os resultados mensais para a liderança com zero dúvidas sobre os dados'."
            ]
        };

        const TRANSLATIONS = {
            pt: {
                app_title: "Plano de Desenvolvimento Individual",
                btn_start: "Iniciar Jornada",
                welcome_title: "Vamos desenhar seu futuro?",
                welcome_desc: "Este é um espaço seguro para você refletir sobre onde está e onde quer chegar. O PDI não é uma formalidade, é a estratégia da sua evolução.",
                step1_title: "Qual é o seu foco?",
                step2_title: "Como vamos chegar lá?",
                step3_title: "Indicadores e Prazos",
                step4_title: "Seu Plano Consolidado",
                final_title: "Parabéns pela iniciativa!",
                final_path: "Success Factors",
                btn_export: "Baixar Documento (.doc)",
                label_evidence: "Evidência de Sucesso",
                label_date: "Data Limite",
                nav_next: "Continuar",
                nav_finish: "Concluir"
            },
            es: {
                app_title: "Plan de Desarrollo Individual",
                btn_start: "Iniciar Jornada",
                welcome_title: "¿Diseñamos tu futuro?",
                welcome_desc: "Este es un espacio seguro para reflexionar sobre dónde estás y a dónde quieres llegar. El PDI no es una formalidad, es la estrategia de tu evolución.",
                step1_title: "¿Cuál es tu enfoque?",
                step2_title: "¿Cómo llegaremos allí?",
                step3_title: "Indicadores y Plazos",
                step4_title: "Tu Plan Consolidado",
                final_title: "¡Felicidades por la iniciativa!",
                final_path: "Success Factors",
                btn_export: "Descargar Documento (.doc)",
                label_evidence: "Evidencia de Éxito",
                label_date: "Fecha Límite",
                nav_next: "Continuar",
                nav_finish: "Concluir"
            }
        };

        // --- ESTADO ---
        let currentStep = 0;
        let currentLang = 'pt';
        
        // --- FUNÇÕES ---

        function init() {
            updateLanguage();
            showStep(0);
            
            // Random Tip
            const tip = DATA.tips[Math.floor(Math.random() * DATA.tips.length)];
            document.getElementById('tip-text').innerText = tip;
        }

        function toggleLanguage() {
            currentLang = currentLang === 'pt' ? 'es' : 'pt';
            document.getElementById('lang-label').innerText = currentLang.toUpperCase();
            updateLanguage();
        }

        function updateLanguage() {
            const t = TRANSLATIONS[currentLang];
            // Update simple text keys
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if(t[key]) el.innerText = t[key];
            });
            // Update placeholders if needed (simplified)
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            
            // Show current
            const currentEl = document.getElementById(`step-${step}`);
            currentEl.classList.remove('hidden');
            
            // Footer visibility
            const footer = document.getElementById('footer-nav');
            if(step > 0 && step < 5) footer.classList.remove('hidden');
            else footer.classList.add('hidden');

            // Button Text Logic
            const btnNextText = document.querySelector('[data-key="nav_next"]');
            if(step === 4) btnNextText.innerText = (currentLang === 'pt' ? 'Concluir' : 'Concluir');
            else btnNextText.innerText = (currentLang === 'pt' ? 'Continuar' : 'Continuar');

            window.scrollTo(0, 0);
        }

        function nextStep() {
            if (currentStep === 2) generateMetricsFields(); // Generate inputs for step 3 based on step 2
            if (currentStep === 3) generateReview(); // Generate review for step 4
            
            if (currentStep < 5) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function resetApp() {
            // Clear inputs
            document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            currentStep = 0;
            showStep(0);
        }

        // --- LÓGICA DINÂMICA ---

        function generateMetricsFields() {
            const container = document.getElementById('metrics-container');
            container.innerHTML = '';
            
            const actions = [
                { id: '70', text: document.getElementById('input-70').value, color: 'emerald', title: '70% Experiência' },
                { id: '20', text: document.getElementById('input-20').value, color: 'amber', title: '20% Relacionamentos' },
                { id: '10', text: document.getElementById('input-10').value, color: 'blue', title: '10% Educação' }
            ];

            let hasContent = false;

            actions.forEach(act => {
                if(act.text.trim()) {
                    hasContent = true;
                    const html = `
                        <div class="bg-white rounded-3xl shadow-sm border-l-4 border-${act.color}-500 p-6 border-y border-r border-slate-100">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xs font-bold uppercase text-${act.color}-600 bg-${act.color}-50 px-2 py-1 rounded">${act.title}</span>
                            </div>
                            <p class="text-slate-700 mb-6 italic">"${act.text}"</p>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">Evidência</label>
                                    <input id="measure-${act.id}" class="input-focus w-full p-2 bg-slate-50 border border-slate-200 rounded-lg outline-none" placeholder="O que comprova a conclusão?">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wide">Prazo</label>
                                    <input id="date-${act.id}" type="date" class="input-focus w-full p-2 bg-slate-50 border border-slate-200 rounded-lg outline-none text-slate-600">
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', html);
                }
            });

            if(!hasContent) {
                container.innerHTML = '<div class="text-center p-8 bg-slate-50 rounded-xl text-slate-400">Nenhuma ação preenchida anteriormente. Volte e preencha.</div>';
            }
        }

        function generateReview() {
            const goal = document.getElementById('input-goal').value;
            const comp = document.getElementById('input-comp').value;
            const container = document.getElementById('review-content');
            
            // Build Actions HTML
            const actions = [
                { id: '70', text: document.getElementById('input-70').value, meas: document.getElementById('measure-70')?.value, date: document.getElementById('date-70')?.value, title: '70% Experiência', color: 'text-emerald-600', bg: 'bg-emerald-50' },
                { id: '20', text: document.getElementById('input-20').value, meas: document.getElementById('measure-20')?.value, date: document.getElementById('date-20')?.value, title: '20% Relacionamentos', color: 'text-amber-600', bg: 'bg-amber-50' },
                { id: '10', text: document.getElementById('input-10').value, meas: document.getElementById('measure-10')?.value, date: document.getElementById('date-10')?.value, title: '10% Educação', color: 'text-blue-600', bg: 'bg-blue-50' }
            ];

            let actionsHtml = '';
            actions.forEach(a => {
                if(a.text) {
                    actionsHtml += `
                        <div class="bg-slate-50/50 rounded-2xl p-6 border border-slate-100">
                            <h4 class="font-bold ${a.color} mb-2 text-sm uppercase tracking-wide">${a.title}</h4>
                            <p class="text-slate-700 font-medium mb-4">${a.text}</p>
                            <div class="flex flex-wrap gap-4 text-xs text-slate-500 border-t border-slate-200 pt-3">
                                <div><strong class="text-slate-400 uppercase tracking-wider">Evidência:</strong> <span class="text-slate-700 ml-1">${a.meas || '-'}</span></div>
                                <div><strong class="text-slate-400 uppercase tracking-wider">Prazo:</strong> <span class="text-slate-700 ml-1">${a.date || '-'}</span></div>
                            </div>
                        </div>
                    `;
                }
            });

            container.innerHTML = `
                <div class="border-b border-slate-100 pb-6 mb-6">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-1">Objetivo Principal</h3>
                    <p class="text-2xl font-bold text-slate-800 leading-tight">${goal || '---'}</p>
                    <div class="mt-3 inline-block bg-indigo-50 px-3 py-1 rounded-lg text-indigo-700 text-sm font-semibold">${comp || '---'}</div>
                </div>
                <div class="space-y-6">${actionsHtml || '<p class="text-slate-400 italic">Sem ações definidas.</p>'}</div>
            `;
        }

        // --- MODAL ---
        function openModal(type) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            modal.classList.remove('hidden');
            
            if (type === 'competencies') {
                title.innerText = 'Competências Sugeridas';
                content.innerHTML = `<div class="grid md:grid-cols-2 gap-4">${DATA.competencies.map(c => 
                    `<button onclick="selectComp('${c}')" class="text-left p-4 rounded-xl border border-slate-100 hover:border-indigo-300 hover:bg-indigo-50 transition-all font-medium text-slate-700 hover:text-indigo-800 w-full">${c}</button>`
                ).join('')}</div>`;
            } else {
                title.innerText = 'Banco de Ideias (PDI Eficaz)';
                content.innerHTML = `
                    <div class="grid md:grid-cols-3 gap-8 text-sm">
                        <div class="space-y-3"><strong class="text-emerald-700 block border-b pb-2">70% Experiência</strong><ul class="list-disc pl-4 space-y-2 text-slate-600">${DATA.ideas.pt.s70.map(i => `<li>${i}</li>`).join('')}</ul></div>
                        <div class="space-y-3"><strong class="text-amber-700 block border-b pb-2">20% Relacionamentos</strong><ul class="list-disc pl-4 space-y-2 text-slate-600">${DATA.ideas.pt.s20.map(i => `<li>${i}</li>`).join('')}</ul></div>
                        <div class="space-y-3"><strong class="text-blue-700 block border-b pb-2">10% Educação</strong><ul class="list-disc pl-4 space-y-2 text-slate-600">${DATA.ideas.pt.s10.map(i => `<li>${i}</li>`).join('')}</ul></div>
                    </div>
                `;
            }
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        function selectComp(comp) {
            document.getElementById('input-comp').value = comp;
            closeModal();
        }

        function exportToWord() {
            const html = document.getElementById('review-content').innerHTML;
            const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>PDI</title></head><body>";
            const footer = "</body></html>";
            
            // Simple reconstruction for Word
            const cleanBody = `
                <h1 style="color:#333">Meu PDI</h1>
                <p>Data: ${new Date().toLocaleDateString()}</p>
                <hr/>
                ${html.replace(/class=".*?"/g, '')} <!-- Strip classes for basic word rendering -->
                <hr/>
                <p>Desenvolvido por Vinicius Carlos</p>
            `;

            const sourceHTML = header + cleanBody + footer;
            const source = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(sourceHTML);
            const fileDownload = document.createElement("a");
            document.body.appendChild(fileDownload);
            fileDownload.href = source;
            fileDownload.download = 'meu_pdi.doc';
            fileDownload.click();
            document.body.removeChild(fileDownload);
        }

        // Initialize
        init();

    </script>
</body>
</html>
